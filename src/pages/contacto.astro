---
import Layout from '../layouts/Layout.astro';
import Button from '../components/Button.astro';
---

<Layout 
  title="Contacto | Jonathan Guarirapa - Desarrollador Web"
  description="¬øTienes un proyecto en mente? Cont√°ctame para discutir tu idea y recibir una cotizaci√≥n personalizada. Respuesta garantizada en menos de 24 horas."
>
  <!-- Hero Section -->
  <section class="relative min-h-[80vh] flex items-center justify-center overflow-hidden">
    <!-- Background -->
    <div class="absolute inset-0 bg-gradient-to-br from-nextsite-bg-darker via-nextsite-dark-blue to-nextsite-bg-dark"></div>
    
    <!-- Animated Elements -->
    <div class="absolute top-20 left-10 w-32 h-32 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full blur-2xl animate-float opacity-20"></div>
    <div class="absolute bottom-20 right-10 w-40 h-40 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-full blur-2xl animate-float opacity-15" style="animation-delay: 2s;"></div>
    
    <div class="relative z-10 max-w-6xl mx-auto px-4 text-center">
      <div class="animate-fade-in-up">
        <h1 class="text-5xl md:text-7xl font-bold mb-6">
          <span class="text-white">Trabajemos</span>
          <br>
          <span class="bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
            Juntos
          </span>
        </h1>
        <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed">
          ¬øTienes un proyecto en mente? Hablemos sobre c√≥mo puedo ayudarte a hacerlo realidad
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href="#formulario" size="lg">
            Enviar Mensaje
          </Button>
          <Button href="/proyectos" variant="ghost" size="lg">
            Ver Mis Trabajos
          </Button>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Form Section -->
  <section id="formulario" class="py-20 bg-nextsite-bg-dark">
    <div class="max-w-4xl mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-white mb-4">
          Env√≠ame un <span class="text-nextsite-accent-blue">Mensaje</span>
        </h2>
        <p class="text-xl text-gray-400 max-w-3xl mx-auto">
          Completa el formulario y me pondr√© en contacto contigo en menos de 24 horas
        </p>
      </div>
      
      <div class="grid lg:grid-cols-2 gap-12">
        <!-- Contact Form -->
        <div class="glass rounded-3xl p-8 animate-fade-in-left">
          <form class="space-y-6" id="contact-form">
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label for="nombre" class="block text-white font-semibold mb-2">Nombre *</label>
                <input 
                  type="text" 
                  id="nombre" 
                  name="nombre" 
                  required
                  class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300"
                  placeholder="Tu nombre completo"
                />
              </div>
              <div>
                <label for="email" class="block text-white font-semibold mb-2">Email *</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  required
                  class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300"
                  placeholder="tu@email.com"
                />
              </div>
            </div>
            
            <div>
              <label for="telefono" class="block text-white font-semibold mb-2">Tel√©fono</label>
              <input 
                type="tel" 
                id="telefono" 
                name="telefono"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300"
                placeholder="+1 (555) 123-4567"
              />
            </div>
            
            <div>
              <label for="empresa" class="block text-white font-semibold mb-2">Empresa</label>
              <input 
                type="text" 
                id="empresa" 
                name="empresa"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300"
                placeholder="Nombre de tu empresa"
              />
            </div>
            
            <div>
              <label for="servicio" class="block text-white font-semibold mb-2">Tipo de Servicio *</label>
              <select 
                id="servicio" 
                name="servicio" 
                required
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300"
              >
                <option value="" class="bg-gray-800">Selecciona un servicio</option>
                <option value="desarrollo-web" class="bg-gray-800">Desarrollo Web</option>
                <option value="diseno-ui-ux" class="bg-gray-800">Dise√±o UI/UX</option>
                <option value="optimizacion" class="bg-gray-800">Optimizaci√≥n</option>
                <option value="landing-page" class="bg-gray-800">Landing Page</option>
                <option value="aplicacion-web" class="bg-gray-800">Aplicaci√≥n Web</option>
                <option value="consulta" class="bg-gray-800">Consulta</option>
                <option value="otro" class="bg-gray-800">Otro</option>
              </select>
            </div>
            
            <div>
              <label for="presupuesto" class="block text-white font-semibold mb-2">Presupuesto Aproximado</label>
              <select 
                id="presupuesto" 
                name="presupuesto"
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300"
              >
                <option value="" class="bg-gray-800">Selecciona un rango</option>
                <option value="500-1000" class="bg-gray-800">$500 - $1,000</option>
                <option value="1000-2500" class="bg-gray-800">$1,000 - $2,500</option>
                <option value="2500-5000" class="bg-gray-800">$2,500 - $5,000</option>
                <option value="5000+" class="bg-gray-800">$5,000+</option>
                <option value="por-definir" class="bg-gray-800">Por definir</option>
    </select>
            </div>
            
            <div>
              <label for="mensaje" class="block text-white font-semibold mb-2">Mensaje *</label>
              <textarea 
                id="mensaje" 
                name="mensaje" 
                rows="6" 
                required
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-nextsite-accent-blue focus:bg-white/20 transition-all duration-300 resize-none"
                placeholder="Cu√©ntame sobre tu proyecto, objetivos, timeline y cualquier detalle importante..."
              ></textarea>
            </div>
            
            <div class="flex items-start gap-3">
              <input 
                type="checkbox" 
                id="privacidad" 
                name="privacidad" 
                required
                class="mt-1 w-5 h-5 text-nextsite-accent-blue bg-white/10 border-white/20 rounded focus:ring-nextsite-accent-blue focus:ring-2"
              />
              <label for="privacidad" class="text-gray-300 text-sm">
                Acepto la <a href="#" class="text-nextsite-accent-blue hover:underline">pol√≠tica de privacidad</a> y 
                el tratamiento de mis datos personales para responder a mi consulta.
    </label>
            </div>

            <button 
              type="submit" 
              class="w-full px-8 py-4 text-lg font-medium text-white bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-400"
            >
              <span class="flex items-center justify-center gap-2">
      Enviar Mensaje
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                </svg>
              </span>
    </button>
  </form>
        </div>
        
        <!-- Contact Info -->
        <div class="space-y-8 animate-fade-in-right">
          <!-- Contact Methods -->
          <div class="glass rounded-3xl p-8">
            <h3 class="text-2xl font-bold text-white mb-6">Otras formas de contacto</h3>
            <div class="space-y-6">
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-2xl flex items-center justify-center">
                  <span class="text-2xl">üìß</span>
                </div>
                <div>
                  <h4 class="text-white font-semibold">Email</h4>
                  <p class="text-gray-400">jonathan@example.com</p>
                  <p class="text-sm text-gray-500">Respuesta en menos de 24 horas</p>
                </div>
              </div>
              
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-2xl flex items-center justify-center">
                  <span class="text-2xl">üì±</span>
                </div>
                <div>
                  <h4 class="text-white font-semibold">WhatsApp</h4>
                  <p class="text-gray-400">+1 (555) 123-4567</p>
                  <p class="text-sm text-gray-500">Disponible de 9 AM a 6 PM</p>
                </div>
              </div>
              
              <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-2xl flex items-center justify-center">
                  <span class="text-2xl">üíº</span>
                </div>
                <div>
                  <h4 class="text-white font-semibold">LinkedIn</h4>
                  <p class="text-gray-400">linkedin.com/in/jonathan</p>
                  <p class="text-sm text-gray-500">Conectemos profesionalmente</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Response Time -->
          <div class="glass rounded-3xl p-8">
            <h3 class="text-2xl font-bold text-white mb-6">Tiempo de respuesta</h3>
            <div class="space-y-4">
              <div class="flex items-center gap-3">
                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                <span class="text-gray-300">Email: Menos de 24 horas</span>
              </div>
              <div class="flex items-center gap-3">
                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                <span class="text-gray-300">WhatsApp: Inmediato (horario laboral)</span>
              </div>
              <div class="flex items-center gap-3">
                <div class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
                <span class="text-gray-300">LinkedIn: 1-2 d√≠as h√°biles</span>
              </div>
            </div>
          </div>
          
          <!-- FAQ -->
          <div class="glass rounded-3xl p-8">
            <h3 class="text-2xl font-bold text-white mb-6">Preguntas frecuentes</h3>
            <div class="space-y-4">
              <div>
                <h4 class="text-white font-semibold mb-2">¬øCu√°nto tiempo toma un proyecto?</h4>
                <p class="text-gray-400 text-sm">Depende del tipo de proyecto. Landing pages: 1 semana. Sitios web completos: 2-3 semanas. Aplicaciones: 4-6 semanas.</p>
              </div>
              <div>
                <h4 class="text-white font-semibold mb-2">¬øOfreces soporte post-entrega?</h4>
                <p class="text-gray-400 text-sm">S√≠, incluyo 30 d√≠as de soporte gratuito y mantenimiento b√°sico en todos mis proyectos.</p>
              </div>
              <div>
                <h4 class="text-white font-semibold mb-2">¬øTrabajas con empresas internacionales?</h4>
                <p class="text-gray-400 text-sm">Absolutamente. Trabajo con clientes de todo el mundo y me adapto a diferentes zonas horarias.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Process Section -->
  <section class="py-20">
    <div class="max-w-6xl mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-white mb-4">
          ¬øQu√© pasa <span class="text-nextsite-accent-blue">despu√©s?</span>
        </h2>
        <p class="text-xl text-gray-400 max-w-3xl mx-auto">
          Mi proceso de trabajo paso a paso para garantizar el √©xito de tu proyecto
        </p>
      </div>
      
      <div class="grid md:grid-cols-4 gap-8">
        <!-- Step 1 -->
        <div class="text-center animate-fade-in-up">
          <div class="w-20 h-20 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
            <span class="text-2xl font-bold text-white">1</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-4">Recibo tu mensaje</h3>
          <p class="text-gray-400 leading-relaxed">
            Reviso tu consulta y me pongo en contacto contigo en menos de 24 horas.
          </p>
        </div>
        
        <!-- Step 2 -->
        <div class="text-center animate-fade-in-up" style="animation-delay: 0.1s;">
          <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-2xl flex items-center justify-center mx-auto mb-6">
            <span class="text-2xl font-bold text-white">2</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-4">Consulta inicial</h3>
          <p class="text-gray-400 leading-relaxed">
            Hablamos sobre tu proyecto, objetivos y expectativas para entender mejor tus necesidades.
          </p>
        </div>
        
        <!-- Step 3 -->
        <div class="text-center animate-fade-in-up" style="animation-delay: 0.2s;">
          <div class="w-20 h-20 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
            <span class="text-2xl font-bold text-white">3</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-4">Propuesta detallada</h3>
          <p class="text-gray-400 leading-relaxed">
            Te env√≠o una propuesta completa con timeline, costos y especificaciones t√©cnicas.
          </p>
        </div>
        
        <!-- Step 4 -->
        <div class="text-center animate-fade-in-up" style="animation-delay: 0.3s;">
          <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-cyan-400 rounded-2xl flex items-center justify-center mx-auto mb-6">
            <span class="text-2xl font-bold text-white">4</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-4">¬°Empezamos!</h3>
          <p class="text-gray-400 leading-relaxed">
            Una vez aprobada la propuesta, comenzamos el desarrollo con comunicaci√≥n constante.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-20 bg-nextsite-bg-dark">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <div class="animate-fade-in-up">
        <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
          ¬øListo para <span class="text-nextsite-accent-blue">Empezar?</span>
        </h2>
        <p class="text-xl text-gray-400 mb-12 max-w-3xl mx-auto leading-relaxed">
          No esperes m√°s. Env√≠a tu mensaje ahora y comencemos a trabajar en tu proyecto
        </p>
        
        <div class="flex flex-col sm:flex-row gap-6 justify-center">
          <Button href="#formulario" size="lg" class="animate-pulse-glow">
            <span class="flex items-center gap-2">
              Enviar Mensaje Ahora
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
              </svg>
            </span>
          </Button>
          <Button href="/sobre-mi" variant="ghost" size="lg">
            <span class="flex items-center gap-2">
              Conoce M√°s Sobre M√≠
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
            </span>
          </Button>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  // Form handling with Google Sheets integration
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    
    if (form) {
      form.addEventListener('submit', async function(e) {
      e.preventDefault();
        console.log('Formulario enviado!');
        
        // Get form data
        const formData = new FormData(form);
        const data = Object.fromEntries(formData);
        console.log('Datos del formulario:', data);
        
        // Simple validation
        if (!data.nombre || !data.email || !data.servicio || !data.mensaje) {
          showNotification('Por favor, completa todos los campos obligatorios.', 'error');
          return;
        }
        
        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(data.email)) {
          showNotification('Por favor, ingresa un email v√°lido.', 'error');
          return;
        }
        
        // Prepare data for Google Sheets
        const sheetData = {
          name: data.nombre,
          email: data.email,
          phone: data.telefono || '',
          message: data.mensaje,
          subject: `${data.servicio} - ${data.empresa || 'Sin empresa'} - Presupuesto: ${data.presupuesto || 'Por definir'}`
        };
        
        // Show loading state
        const submitButton = form.querySelector('button[type="submit"]');
        const originalText = submitButton.innerHTML;
        
        submitButton.innerHTML = `
          <span class="flex items-center justify-center gap-2">
            <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Enviando...
          </span>
        `;
        
        submitButton.disabled = true;
        
        try {
          console.log('Enviando datos a Google Sheets:', sheetData);
          
          // Send to Google Sheets
          const response = await fetch('https://script.google.com/macros/s/AKfycbyV5zNy1wMuzvabrVtOfm4_gSDb8-7DrLVOJmOt9Nqw45UhxsPn0ux4btvmAzTwVV9U/exec', {
          method: 'POST',
          mode: 'no-cors',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(sheetData)
          });
          
          console.log('Respuesta recibida:', response);
          
          // Show success message
          showNotification('¬°Mensaje enviado con √©xito! Te contactar√© pronto.', 'success');
        form.reset();
          
        } catch (error) {
          console.error('Error:', error);
          showNotification('Hubo un error al enviar el mensaje. Por favor, int√©ntalo de nuevo.', 'error');
      } finally {
          // Reset button
          submitButton.innerHTML = originalText;
          submitButton.disabled = false;
        }
      });
    }
    
    // Notification system
    function showNotification(message, type = 'info') {
      // Remove existing notifications
      const existingNotification = document.querySelector('.notification');
      if (existingNotification) {
        existingNotification.remove();
      }
      
      // Create notification
      const notification = document.createElement('div');
      notification.className = `notification fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 ${
        type === 'success' ? 'bg-green-500 text-white' : 
        type === 'error' ? 'bg-red-500 text-white' : 
        'bg-blue-500 text-white'
      }`;
      
      notification.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="flex-shrink-0">
            ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">${message}</p>
          </div>
          <button onclick="this.parentElement.parentElement.remove()" class="flex-shrink-0 text-white hover:text-gray-200">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        if (notification.parentElement) {
          notification.remove();
        }
      }, 5000);
      }
    });
  </script>